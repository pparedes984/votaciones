{
    "type": "Ext.app.ViewController",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "vwprtprincipal",
        "designer|userClassName": "vwprtPrincipalViewController"
    },
    "configAlternates": {
        "designer|userAlias": "string",
        "designer|userClassName": "string"
    },
    "designerId": "0e72042c-5b55-4f2b-b43a-3abb2115e6e9",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "cargarCandidatos",
                "implHandler": [
                    "var indice = Ext.getCmp('dpIndice').getValue();",
                    "var panelMenu = Ext.create('Ext.panel.Panel', {",
                    "    id:'pnlMenu',",
                    "    titleAlign: 'center',",
                    "    margin: '10 10 10 10',",
                    "    autoScroll: true,",
                    "    layout : {",
                    "        type  : 'column'",
                    "    },",
                    "    renderTo: Ext.getBody()",
                    "});",
                    "Ext.getCmp('pnlVotos').add(panelMenu);",
                    "Ext.Ajax.request({",
                    "    url: '../servidor/voto/Candidato/getTipo',",
                    "    method:\"post\",",
                    "    params:{",
                    "        tipo: TIPOS.data[indice-1].id,",
                    "    },",
                    "    success: function( result, request ) {",
                    "        var responseData = Ext.JSON.decode(result.responseText);",
                    "",
                    "        for(i=0;i<responseData.data.length;i++){",
                    "            var panel = Ext.create('Ext.panel.Panel', {",
                    "                title: responseData.data[i].nombre,",
                    "                titleAlign: 'center',",
                    "                columnWidth: 1/5,",
                    "                margin: '10 10 10 10',",
                    "                layout : {",
                    "                    type  : 'vbox',",
                    "                    pack  : 'center',",
                    "                    align : 'middle'",
                    "                },",
                    "                items: [",
                    "                    {",
                    "                        xtype: 'panel',",
                    "                        layout: 'fit',",
                    "                        height: 150,",
                    "                        width: 150,",
                    "                        margin: '10 0 0 0',",
                    "                        html: '<div style=\"display: flex; justify-content: center;\"><img src=\"'+responseData.data[i].foto+'\" height=\"140\"></div>',",
                    "                    },",
                    "                    {",
                    "                        xtype: 'fieldcontainer',",
                    "                        defaultType: 'checkboxfield',",
                    "                        items: [",
                    "                            {",
                    "                                boxLabel  : 'Votar',",
                    "                                name      : 'voto',",
                    "                                //checked   : valchb,",
                    "                                id        : 'ch'+responseData.data[i].id,",
                    "                                inputValue: '1',",
                    "                                listeners: { change:function (me,newValue, oldValue, eOpts ){",
                    "",
                    "                                    if(newValue === true){",
                    "                                        Ext.getCmp('chBlanco').setValue(false);",
                    "                                        Ext.getCmp('chNulo').setValue(false);",
                    "                                        var cont=0;",
                    "                                        for(var i=0;i<responseData.data.length;i++){",
                    "",
                    "                                            if(Ext.getCmp('ch'+responseData.data[i].id).getValue() === true)",
                    "                                                cont++;",
                    "",
                    "                                            if(cont >= TIPOS.data[indice-1].votos){",
                    "                                                for(var j=0;j<responseData.data.length;j++){",
                    "                                                    if(Ext.getCmp('ch'+responseData.data[j].id).getValue() !== true){",
                    "                                                        Ext.getCmp('ch'+responseData.data[j].id).setDisabled(true);",
                    "                                                    }",
                    "                                                }",
                    "                                                break;",
                    "                                            }",
                    "                                        }",
                    "                                    }",
                    "                                    else{",
                    "                                        for(var j=0;j<responseData.data.length;j++){",
                    "                                            Ext.getCmp('ch'+responseData.data[j].id).setDisabled(false);",
                    "                                        }",
                    "                                    }",
                    "                                }",
                    "                                           }",
                    "                            }",
                    "                        ]",
                    "                    }",
                    "                ],",
                    "                renderTo: Ext.getBody()",
                    "            });",
                    "            Ext.getCmp('pnlMenu').add(panel);",
                    "        }",
                    "        Ext.getCmp('btnSiguiente').setDisabled(false);",
                    "        if(indice === 2)",
                    "        {",
                    "            Ext.getCmp('btnRegresar').setDisabled(false);",
                    "        }",
                    "",
                    "        if(indice === 1)",
                    "        {",
                    "            Ext.getCmp('btnRegresar').setDisabled(true);",
                    "        }",
                    "        else{",
                    "            Ext.getCmp('btnRegresar').setDisabled(false);",
                    "",
                    "        }",
                    "        for(var j=0;j<VOTOS[indice-1].length;j++){",
                    "            if(VOTOS[indice-1][j] === 'BLANCO'){",
                    "                Ext.getCmp('chBlanco').setValue(true);",
                    "                break;",
                    "            }",
                    "            else if(VOTOS[indice-1][j] === 'NULO'){",
                    "                Ext.getCmp('chNulo').setValue(true);",
                    "                break;",
                    "            }",
                    "            else",
                    "                Ext.getCmp('ch'+VOTOS[indice-1][j]).setValue(true);",
                    "        }",
                    "    },",
                    "    failure: function(response, opts) {",
                    "        console.log('server-side failure with status code ' + response.status);",
                    "    }",
                    "});"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "cargarCandidatos",
            "designerId": "9d56c9b4-db7e-4fae-bdbb-266dd5796244"
        }
    ]
}